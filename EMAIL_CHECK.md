# メール確認方法（macOS + postfix）

## 1. ターミナルでメールを確認する方法

### ローカルメールボックスを確認

```bash
# メールを確認
mail

# または、特定のユーザーのメールボックスを確認
mail -f /var/mail/$(whoami)
```

### メールコマンドの使い方

メールを開いたら：
- `Enter`: 次のメールを表示
- `q`: 終了
- `d [番号]`: 指定したメールを削除
- `h`: ヘッダー一覧を表示

## 2. Mail.appで確認する方法

macOSのMail.appでローカルメールを確認するには、設定が必要です：

1. Mail.appを開く
2. 「メール」→「アカウントを追加」
3. 「その他のメールアカウント」を選択
4. メールアドレス: `your-username@localhost`
5. パスワード: （空欄でOK）
6. 受信メールサーバー: `localhost`
7. ポート: `25`

ただし、開発環境ではこの設定は複雑なので、ターミナルの`mail`コマンドを使う方が簡単です。

## 3. postfixのログを確認する

メール送信のログを確認：

```bash
# リアルタイムでログを確認
sudo tail -f /var/log/mail.log

# または
sudo tail -f /var/log/postfix.log
```

## 4. メールキューを確認する

送信待ちのメールを確認：

```bash
# メールキューを表示
sudo postqueue -p

# メールキューを強制送信
sudo postqueue -f
```

## 5. 開発環境での推奨方法

### 方法1: テスト用メールアドレスを使用（推奨）

設定画面で、実際に存在するメールアドレス（Gmailなど）を指定すると、実際にメールが届きます。

**注意**: postfixが外部にメールを送信するには、追加設定が必要な場合があります。

### 方法2: メール機能をOFFにする

開発環境では、設定画面で「メール通知を有効にする」をOFFにしておくことを推奨します。

### 方法3: ログで確認する

メール送信の成功/失敗は、アプリケーションのログとpostfixのログで確認できます。

## 6. 実際のメール送信をテストする場合

### Gmailなどの外部メールアドレスに送信する場合

postfixが外部にメールを送信するには、リレーホストの設定が必要です。

`/etc/postfix/main.cf`を編集：

```
# GmailのSMTPリレーを使用する例（認証が必要な場合は別途設定）
relayhost = [smtp.gmail.com]:587
```

ただし、開発環境では、この設定は複雑なので、**メール機能をOFFにするか、ログで確認する方法を推奨**します。

## 7. アプリケーションのログで確認

Spring Bootアプリケーションのログでも、メール送信の成功/失敗を確認できます：

```bash
# アプリケーションのログを確認
tail -f logs/application.log
```

または、コンソール出力で確認：
- 成功: 「登録しました。」
- 失敗: 「登録しました。（メール送信に失敗しました：...）」

## まとめ

**開発環境での推奨確認方法**：

1. **アプリケーションの画面**: 登録完了メッセージで成功/失敗を確認
2. **postfixのログ**: `sudo tail -f /var/log/mail.log` で送信ログを確認
3. **メールキュー**: `sudo postqueue -p` で送信待ちメールを確認

実際のメール受信を確認したい場合は、Gmailなどの実際のメールアドレスを指定し、postfixのリレーホスト設定を行う必要があります。
